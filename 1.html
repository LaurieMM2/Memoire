<script>
    let emails = [
        {
            sender: "support@google.fr",
            name: "Google Support",
            subject: "Alerte de sécurité",
            content: "Nous avons détecté une connexion suspecte.",
            isPhishing: false,
            rating: null // Ajout d'un champ pour la notation
        },
        {
            sender: "admin@banque-arnaque.com",
            name: "Banque Sécurité",
            subject: "Problème de sécurité",
            content: "Mettez à jour vos informations immédiatement.",
            isPhishing: true,
            rating: null
        }
    ];
    let currentEmailIndex = null;

    function displayEmail(index) {
        currentEmailIndex = index;
        const email = emails[index];
        document.getElementById("emailDisplay").innerHTML = `
            <div><strong>${email.name}</strong> (${email.sender})</div>
            <div><strong>${email.subject}</strong></div>
            <p>${email.content}</p>
        `;

        document.getElementById("notationContainer").style.display = "block";
        generateLikertScale(email.rating);
    }

    function generateLikertScale(selectedValue = null) {
        let scaleContainer = document.getElementById("likertScale");
        scaleContainer.innerHTML = `
            <span>1 (Pas suspect)</span>
            ${[1, 2, 3, 4, 5, 6, 7].map(num => `
                <label>
                    <input type="radio" name="likert" value="${num}" ${selectedValue == num ? "checked" : ""}> ${num}
                </label>
            `).join('')}
            <span>7 (Très suspect)</span>
        `;
    }

    function recordResponse() {
        const selectedValue = document.querySelector('input[name="likert"]:checked');
        if (!selectedValue) {
            alert("Veuillez sélectionner une valeur sur l'échelle.");
            return;
        }

        // Enregistrer la notation dans l'email affiché
        emails[currentEmailIndex].rating = selectedValue.value;
        alert("Réponse soumise !");
    }
</script>
